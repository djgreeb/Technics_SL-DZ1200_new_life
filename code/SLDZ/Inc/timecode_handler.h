/////////////////////////////////////////////////////////////////////////////////////////////////
// 	timecode handler
//	product: Technics SL-DZ1200 new life
//
//
//
//
//	Author: Anatska Andrei
//
/////////////////////////////////////////////////////////////////////////////////////////////////




//////////////////////////////////////////////////////////////////////////////
//
//		Timecode handler		
//
//	do not create long-running processes in this interrupt 
//	because the connection with the SD card is interrupted
//	
void EXTI0_IRQHandler(void)
	{
	TC_PERIOD = (TIM2->CNT);	
	TIM2->CNT = 0;	
	if(TC_PERIOD>100)
		{
		TC_AV_PERIOD = 3*(TC_AV_PERIOD>>2) + (TC_PERIOD>>2); 	
		if(((GPIOD->IDR)&0x00002000)==0x00)
			{
			TC_REVERSE = 1;	
			}
		else
			{
			TC_REVERSE = 0;
			}			
		}	
  HAL_GPIO_EXTI_IRQHandler(GPIO_PIN_0);
	}		
	

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



